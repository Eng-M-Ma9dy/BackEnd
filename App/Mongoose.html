<!DOCTYPE html>

<html>
    <head>
        <meta charset="UTF-8">
        <meta name="author" content="Eng: Mohamed Magdy Mettwally">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="The Reference For Back-End Developers, It's Contain All Code The Developers use in coding, Node.js, SQL DB (Sequelize), MongoDB (Mongoose), APIs,GraphQL, Socket.io, Ajax">
        <meta name="keywords" content="Node.js Database SQL Sequelize MongoDB Mongoose APIs GraphQL Socket.io Ajax Coding Developers Back-End">
    
        <title>Mongoose</title>
        <meta property="og:image" content="./../src/Images/Logo-MM-Cover.jpg">
        <link rel="website icon" type="PNG" href="./../src/Images/Logo-MM-Title.png">

        <!-- Offline Bootstrap CSS : -->
        <link href="../CSS/bootstrap.min.css" rel="stylesheet"/>

        <!-- FontAwesome CSS : -->
        <link href="../CSS/all.min.css" rel="stylesheet"/>
                
        <!-- My Shared CSS : -->
        <link href="../CSS/shared.css" rel="stylesheet"/>

    </head>

    <body>

        <!---------------------------------------------------------------------------------------------------------------------------->
        <!----------------------------------------------------------------------------------------------------------------------------> 
        <!-- Loader -->
        <!------------>

        <div id="myLoading">

            <!---------------------------------------------------------------->
    
            <div id="loadingDiv" class="d-flex justify-content-center align-items-center">
                <div id="loaderDiv" class="loader--style6" title="5">
                    <svg id="loaderSize" version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg"
                        xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="30px"
                        viewBox="0 0 24 30" style="enable-background:new 0 0 50 50;" xml:space="preserve">
                        <rect x="0" y="13" width="4" height="5" fill="blue">
                            <animate attributeName="height" attributeType="XML" values="5;21;5" begin="0s" dur="0.6s"
                                repeatCount="indefinite" />
                            <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0s" dur="0.6s"
                                repeatCount="indefinite" />
                        </rect>
                        <rect x="10" y="13" width="4" height="5" fill="white">
                            <animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.15s" dur="0.6s"
                                repeatCount="indefinite" />
                            <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.15s" dur="0.6s"
                                repeatCount="indefinite" />
                        </rect>
                        <rect x="20" y="13" width="4" height="5" fill="blue">
                            <animate attributeName="height" attributeType="XML" values="5;21;5" begin="0.3s" dur="0.6s"
                                repeatCount="indefinite" />
                            <animate attributeName="y" attributeType="XML" values="13; 5; 13" begin="0.3s" dur="0.6s"
                                repeatCount="indefinite" />
                        </rect>
                    </svg>
                </div>
            </div>
    
            <!---------------------------------------------------------------->
    
        </div>

        <!---------------------------------------------------------------------------------------------------------------------------->
        <!----------------------------------------------------------------------------------------------------------------------------> 
        <!-- Header -->
        <!------------>

        <header id="headerSection" class="w-100 vh-100 mb-1">

            <div id="headerDiv" class="overflow-hidden position-relative">

                <svg id="svg_white" viewBox="0 0 1440 320">
                    <path fill="white" fill-opacity="1" d="M0,0L24,16C48,32,96,64,144,80C192,96,240,96,288,80C336,64,384,32,432,48C480,64,528,128,576,144C624,160,672,128,720,133.3C768,139,816,181,864,197.3C912,213,960,203,1008,208C1056,213,1104,235,1152,245.3C1200,256,1248,256,1296,250.7C1344,245,1392,235,1416,229.3L1440,224L1440,0L1416,0C1392,0,1344,0,1296,0C1248,0,1200,0,1152,0C1104,0,1056,0,1008,0C960,0,912,0,864,0C816,0,768,0,720,0C672,0,624,0,576,0C528,0,480,0,432,0C384,0,336,0,288,0C240,0,192,0,144,0C96,0,48,0,24,0L0,0Z"></path>
                </svg>

                <svg id="svg_blueviolet" viewBox="0 0 1440 320">
                    <path fill="blueviolet" fill-opacity="1" d="M0,0L24,16C48,32,96,64,144,80C192,96,240,96,288,80C336,64,384,32,432,48C480,64,528,128,576,144C624,160,672,128,720,133.3C768,139,816,181,864,197.3C912,213,960,203,1008,208C1056,213,1104,235,1152,245.3C1200,256,1248,256,1296,250.7C1344,245,1392,235,1416,229.3L1440,224L1440,0L1416,0C1392,0,1344,0,1296,0C1248,0,1200,0,1152,0C1104,0,1056,0,1008,0C960,0,912,0,864,0C816,0,768,0,720,0C672,0,624,0,576,0C528,0,480,0,432,0C384,0,336,0,288,0C240,0,192,0,144,0C96,0,48,0,24,0L0,0Z"></path>
                </svg>

                <div id="headerDiv_Content" class="d-flex flex-column justify-content-center align-items-start">

    
                    <div class="ms-3 text-white">

                        <h4>Back End..</h4>
                        <h1 id="theMainTitle" class="fw-bold">ODM Mongoose</h1>
                        <h5 class="text-end">No SQL Database</h5>

                    </div>
                                
                    <div>
                        <div class="d-flex justify-content-start ms-3 mb-3">
        
                            <div class="rotating-text">
                    
                                <p class="kf text-light">I'm a </p>
                    
                                <p>
                                    <span class="word w-1">     M.Magdy    </span>
                                    <span class="word w-2">     Full-Stack </span>
                                    <span class="word w-3">     Developer  </span>
                                </p>
                            
                            </div>
        
                        </div>
        
                        <div class="text-light ms-3 d-flex justify-content-start">
                
                            <button onclick="openLink('www.linkedin.com/in/eng-m-ma9dy/')" class="SM-BTN-icon LinkedIn rounded-circle me-2 fs-3 bg-light d-flex align-items-center justify-content-center">
                                <i class="fa-brands fa-linkedin"></i>
                            </button>
        
                            <button onclick="openLink('github.com/Eng-M-Ma9dy')" class="SM-BTN-icon GitHub rounded-circle mx-2 fs-3 bg-light d-flex align-items-center justify-content-center">
                                <i class="fa-brands fa-github"></i>
                            </button>
        
                            <button onclick="openLink('www.facebook.com/eng.m.ma9dy/')" class="SM-BTN-icon Facebook rounded-circle mx-2 fs-3 bg-light d-flex align-items-center justify-content-center">
                                <i class="fa-brands fa-facebook"></i>
                            </button>
                
                            <button onclick="openLink('www.instagram.com/eng.m.ma9dy/')" class="SM-BTN-icon Instagram rounded-circle mx-2 fs-3 bg-light d-flex align-items-center justify-content-center">
                                <i class="fa-brands fa-instagram"></i>
                            </button>
                
                        </div>
                        
                    </div>
                
                </div>

            </div>

        </header>

        <!---------------------------------------------------------------------------------------------------------------------------->
        <!----------------------------------------------------------------------------------------------------------------------------> 
        <!-- Main -->
        <!---------->

        <main id="mainSection" class="text-white mb-1">
        
            <div id="mainDiv" class="py-5">

<!------------------------------------------------------------------------------------------------------------------------------------>
<!------------------------------------------------------------------------------------------------------------------------------------>
<!------------------------------------------------------------------------------------------------------------------------------------>
    
    <div class="mt-5">
        <button id="homeBTN" onclick="openLink('eng-m-ma9dy.github.io/BackEnd/')" class="border-0 mx-auto text-white bg-primary fs-1 d-flex justify-content-center align-items-center">
            <i class="px-2 border-0 fa-solid fa-house-chimney"></i> <span id="homeText" class="d-none">Home</span>
        </button>
    </div>




    <div class="container mb-5">
        <div class="row">

            <h2 class="my-5 py-5 text-center">( <span class="text-primary">ODM <span class="text-white">-</span> Mongoose</span> ) </h2>

            <!------------------------------------------------------------------------------------->

            <div class="col-12">

                <div class="border">
                    <h5 class="m-0">  
                        <pre class="m-0 p-3 p-md-5">
<code>

  - ODM --- Object Document Mapping

  - The commands used to delete and add  an element in the table differ from programming language to another, so we use ORM

  - DB1         DB2      VS     ODM   
  --------------------------------------------
  - insert      add             insertMany

  - For apply ODM With MongoDB, i will use Mongoose

  - For install Mongoose >> npm i mongoose

</code>
                        </pre>
                    </h5>
                </div>
                
            </div>

            <!------------------------------------------------------------------------------------->

            <div class="col-12">


                <h2 class="my-5  text-center">( <span class="text-primary">Start New Project</span> ) </h2>

                <div class="border">
                    <h5 class="m-0">  
                        <div class="p-3 p-md-5">
                            <h3 class="my-5">* I Will Divide Folders To :</h3>
                            <div class="bg-dark py-5">
                                <img src="../src/Images/SubFelders1.jpg" class="mx-1" alt="">
                                <img src="../src/Images/SubFelders2.jpg" class="mx-1" alt="">
                                <img src="../src/Images/SubFelders3.jpg" class="mx-1" alt="">
                            </div>
                        </div>
                    </h5>
                </div>
                
            </div>

            <!------------------------------------------------------------------------------------->

            <div class="col-12">


                <h2 class="my-5  text-center">( index.js ) </h2>

                <div class="border">
                    <h5 class="m-0">  
                        <pre class="m-0 p-3 p-md-5">
<code>

    //-------------------------------------------------------------------------------
    // For Create Express Server :
    //-----------------------------

    import express from 'express'

    const app = express()

    const port = 3000

    app.use(express.json())

    app.listen(port, () => console.log(`Example app listening on port ${port}!`))

    //-------------------------------------------------------------------------------
    // import and call Connection :
    //----------------------------------

    import {connection} from './DB/connection.js';

    connection()

    //-------------------------------------------------------------------------------
    // API Create :
    //------------------------------

    app.get('/', (req, res) => {
    
        res.send('For Use API Url: http://localhost:3000/api/v1/table1/')
    })

    //---------------------------------------------------------------------------------

    import userRouters from './src/Modules/User/User.routes.js'

    app.use('/api/v1/user',userRouters)

    //---------------------------------------------------------------------------------

    import blogRouters from './src/modules/Blog/Blog.routes.js'

    app.use('/api/v1/blog',blogRouters)

    //---------------------------------------------------------------------------------

</code>
                        </pre>
                    </h5>
                </div>
                
            </div>

            <!------------------------------------------------------------------------------------->

            <div class="col-12 mt-5">

                <div class="border">
                    <h5 class="m-0">  
                        <pre class="m-0 p-3 p-md-5">
<code>

    // Project > Database > Connection.js
    // ----------------------------------------------------------------
    
    import mongoose from "mongoose";

    export const connection = ()=>{
        mongoose.set("strictQuery",true);
        mongoose.connect('mongodb://127.0.0.1:27017/node39')

        .then(()=>{
            console.log("Connection To MongoDB");
        }).catch((err)=>{
            console.log("Error Connecting To MongoDB",err);
        });
    }

</code>
                        </pre>
                    </h5>
                </div>
                
            </div>

            <!------------------------------------------------------------------------------------->

            <div class="col-md-6 mt-5">

                <div class="border">
                    <h5 class="m-0">  
                        <pre style="height: 600px;" class="m-0 ">
<code>

    // Project > Database > Models > User.model.js
    // ----------------------------------------------------------------

    import mongoose from "mongoose";

    const UserSchema = new mongoose.Schema({

    name:String,

    age:Number,

    email:String,

    password:String,
    },{
    // For add Created_@ / Updated_@
    timestamps:true
    })

    // Set The Schema in User-Table

    // The Name of Table must be Singular

    const UserModule = mongoose.model("User",UserSchema)

    export default UserModule;

</code>
                        </pre>
                    </h5>
                </div>
                
            </div>

            <div class="col-md-6 mt-5">
                
                <div class="border">
                    <h5 class="m-0">  
                        <pre style="height: 600px;" class="m-0 ">
<code>

    // Project > Database > Models > Blog.model.js
    // ----------------------------------------------------------------

    import mongoose from 'mongoose';

    const table1Schema = new mongoose.Schema({

    title: String,

    description:String,

    createdBy:{

    type:mongoose.Types.ObjectId,
    // For Link the ObjectId of createdBy by User_id
    // Set Name Of user Collection
    ref:"User"
    },

    },{
    // For add Created_@ / Updated_@
    timestamps:true
    })

    // Set Schema in Model For Create Collection

    const blogModel = mongoose.model("Blog",blogSchema)

    export default blogModel

</code>
                        </pre>
                    </h5>
                </div>
                
            </div>

            <!------------------------------------------------------------------------------------->

            <div class="col-md-6 mt-5">
                
                <div class="border">
                    <h5 class="m-0">  
                        <pre style="height: 600px;" class="m-0 ">
<code>

    // Project > src > Api > user > Controllers > user.controllers.js
    // ----------------------------------------------------------------

    import UserModule from '../../../../DB/model/User.model.js'

    const getAllUser = async (req,res)=>{
    const users = await userModule.find()
    res.json({message:"Get All User",users})
    }

    // const getAllUser = async (req,res)=>{
    //     const users = await userModule.findById()
    //     res.json({message:"Get All User",users})
    // }
    // const getAllUser = async (req,res)=>{
    //     const users = await userModule.findById().select("-age -name");
    //     res.json({message:"Get All User",users})
    // }
    // const getAllUser = async (req,res)=>{
    //     const users = await userModule.findById("6429833412e03da01af08c6f",{password:0 ,age:0});
    //     res.json({message:"Get All User",users})
    // }
    // const getAllUser = async (req,res)=>{
    //     const users = await userModule.findById("6429833412e03da01af08c6f",{password:1,name:1});
    //     res.json({message:"Get All User",users})
    // }

    const addUser = async (req,res)=>{
    let {name,age,email,password} = req.body;
    const added = await userModule.insertMany({name,age,email,password})
    res.json({message:"Add User" , added})
    }

    // const updateUser = async (req,res)=>{
    //     let {_id,name,age,email,password} = req.body;
    //     const updated = await userModule.findOneAndUpdate(_id,{name,age,email,password})
    //     res.json({message:"Update User",updated})
    // }

    const updateUser = async (req,res)=>{
    let {_id,name,age,email,password} = req.body;
    const updated = await userModule.findOneAndUpdate(_id,{name,age,email,password},{new:true})
    res.json({message:"Update User",updated})
    }

    const deleteUser = async (req,res)=>{
    let {_id} = req.body;
    let deleted = await userModule.deleteOne({_id})
    res.json({message:"Delete User",deleted})
    }

    export {getAllUser,addUser,updateUser,deleteUser};

</code>
                        </pre>
                    </h5>
                </div>
                
            </div>
                
            <div class="col-md-6 mt-5">
                                
                <div class="border">
                    <h5 class="m-0">  
                        <pre style="height: 600px;" class="m-0 ">
<code>

    // Project > src > Api > user > user.routes.js
    // ----------------------------------------------------------------

    import express from "express";

    import * as userController from './controller/user.controller.js'

    const router = express.Router();

    router.get("/",userController.getAllUser)

    router.post("/",userController.addUser)

    router.put("/",userController.updateUser)

    router.delete("/",userController.deleteUser)

    export default router;

</code>
                        </pre>
                    </h5>
                </div>
                
            </div>

            <!------------------------------------------------------------------------------------->

            <div class="col-md-6 mt-5">
                
                <div class="border">
                    <h5 class="m-0">  
                        <pre style="height: 600px;" class="m-0 ">
<code>

    // Project > src > Api > Blog > Controllers > Blog.controllers.js
    // ----------------------------------------------------------------

    import BlogModule from '../../../../DB/model/Blog.model.js'

    const getAllBlog = async (req,res)=>{
    const blogs = await blogModule.find()
    res.json({message:"Get All Blog",blogs})
    }

    // const getAllBlog = async (req,res)=>{
    //     const blogs = await blogModule.findById()
    //     res.json({message:"Get All Blog",blogs})
    // }
    // const getAllBlog = async (req,res)=>{
    //     const blogs = await blogModule.findById().select("-age -name");
    //     res.json({message:"Get All Blog",blogs})
    // }
    // const getAllBlog = async (req,res)=>{
    //     const blogs = await blogModule.findById("6429833412e03da01af08c6f",{password:0 ,age:0});
    //     res.json({message:"Get All Blog",blogs})
    // }
    // const getAllBlog = async (req,res)=>{
    //     const blogs = await blogModule.findById("6429833412e03da01af08c6f",{password:1,name:1});
    //     res.json({message:"Get All Blog",blogs})
    // }

    const addBlog = async (req,res)=>{
    let {name,age,email,password} = req.body;
    const added = await blogModule.insertMany({name,age,email,password})
    res.json({message:"Add Blog" , added})
    }

    // const updateBlog = async (req,res)=>{
    //     let {_id,name,age,email,password} = req.body;
    //     const updated = await blogModule.findOneAndUpdate(_id,{name,age,email,password})
    //     res.json({message:"Update Blog",updated})
    // }

    const updateBlog = async (req,res)=>{
    let {_id,name,age,email,password} = req.body;
    const updated = await blogModule.findOneAndUpdate(_id,{name,age,email,password},{new:true})
    res.json({message:"Update Blog",updated})
    }

    const deleteBlog = async (req,res)=>{
    let {_id} = req.body;
    let deleted = await blogModule.deleteOne({_id})
    res.json({message:"Delete Blog",deleted})
    }

    export {getAllBlog,addBlog,updateBlog,deleteBlog};

</code>
                        </pre>
                    </h5>
                </div>
                
            </div>
                
            <div class="col-md-6 mt-5">
                                
                <div class="border">
                    <h5 class="m-0">  
                        <pre style="height: 600px;" class="m-0 ">
<code>

    // Project > src > Api > Blog > Blog.routes.js
    // ----------------------------------------------------------------

    import express from "express";

    import * as blogController from './controller/blog.controller.js'

    const router = express.Router();

    router.get("/",blogController.getAllBlog)

    router.post("/",blogController.addBlog)

    router.put("/",blogController.updateBlog)

    router.delete("/",blogController.deleteBlog)

    export default router;
    
</code>
                        </pre>
                    </h5>
                </div>
                
            </div>

<!------------------------------------------------------------------------------------->

        </div>
    </div>

<!------------------------------------------------------------------------------------------------------------------------------------>
<!------------------------------------------------------------------------------------------------------------------------------------>
<!------------------------------------------------------------------------------------------------------------------------------------>

            </div>

        </main>

        <!---------------------------------------------------------------------------------------------------------------------------->
        <!----------------------------------------------------------------------------------------------------------------------------> 
        <!-- Footer -->
        <!------------>

        <footer id="megaContactUs" class="py-5 bg-black text-white"></footer>

        <!---------------------------------------------------------------------------------------------------------------------------->
        <!----------------------------------------------------------------------------------------------------------------------------> 
        <!-- JS Links -->
        <!-------------->
        
        <!-- Offline Bootstrap js : -->
        <script src="../JS/bootstrap.bundle.min.js"></script>

        <!-- jQuery js : -->
        <script src="../JS/jquery-3.6.3.min.js"></script>

        <!-- Footer : -->
        <script src="https://eng-m-ma9dy.github.io/Static-Files/JS/Mega-Footer.js"></script>

        <!-- My Shared js : -->
        <script src="../JS/shared.js"></script>
    
    </body>
</html>
